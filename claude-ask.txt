ğŸ“‹ 1000ä»¶åˆ¶é™ä¿®æ­£ã®å®Œå…¨ã¾ã¨ã‚

  ğŸ¯ ä¿®æ­£å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«

  supabase-client.js ã®ã¿ï¼ˆ1ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

  ğŸ”§ ä¿®æ­£ã—ãŸé–¢æ•°ãƒ»ç®‡æ‰€

  1. getMonthlyTasks() é–¢æ•° (è¡Œ200-250é ƒ)

  ä¿®æ­£å‰:
  const { data, error } = await query
      .order('month', { ascending: false })
      .order('id', { ascending: true });

  ä¿®æ­£å¾Œ:
  // ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã§å…¨ä»¶å–å¾—ï¼ˆ1000ä»¶åˆ¶é™å›é¿ï¼‰
  let allData = [];
  let from = 0;
  const batchSize = 1000;

  while (true) {
      const { data, error } = await supabase
          .from('monthly_tasks')
          .select('*')
          .order('client_id', { ascending: true })
          .order('month', { ascending: false })
          .order('completed', { ascending: false })
          .order('id', { ascending: true })
          .range(from, from + batchSize - 1);

      if (!data || data.length === 0) break;
      allData = allData.concat(data);
      if (data.length < batchSize) break;
      from += batchSize;
  }

  2. getAllMonthlyTasksForAllClients() é–¢æ•° (è¡Œ285-315é ƒ)

  ä¿®æ­£å‰: åˆ¶é™ãªã—ã®å˜ç´”å–å¾—
  ä¿®æ­£å¾Œ: åŒæ§˜ã®ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…

  3. getMonthlyTasksByPeriod() é–¢æ•° (è¡Œ2735-2750é ƒ)

  ä¿®æ­£å‰: åˆ¶é™ãªã—ã®æœŸé–“æŒ‡å®šå–å¾—
  ä¿®æ­£å¾Œ: æœŸé–“æŒ‡å®šï¼‹ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³

  4. createFullBackup() é–¢æ•° (è¡Œ1553-1580é ƒ)

  ä¿®æ­£å‰:
  const { data, error } = await supabase
      .from(tableName)
      .select('*');

  ä¿®æ­£å¾Œ:
  // monthly_tasksãƒ†ãƒ¼ãƒ–ãƒ«ã®å ´åˆã¯è¤‡æ•°ã‚½ãƒ¼ãƒˆ
  if (tableName === 'monthly_tasks') {
      query = query
          .order('client_id', { ascending: true })
          .order('month', { ascending: false })
          .order('completed', { ascending: false })
          .order('id', { ascending: true });
  } else {
      query = query.order('id', { ascending: true });
  }

  const { data, error } = await query.range(from, from + batchSize - 1);

  âš¡ ä¿®æ­£å†…å®¹ã®ãƒã‚¤ãƒ³ãƒˆ

  1. ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…: 1000ä»¶ãšã¤ãƒãƒƒãƒå‡¦ç†
  2. è¤‡æ•°ã‚½ãƒ¼ãƒˆæ¡ä»¶å¯¾å¿œ: ãƒ‡ãƒ¼ã‚¿ã®ä¸€è²«æ€§ç¢ºä¿
  3. è©³ç´°ãƒ­ã‚°è¿½åŠ : å–å¾—çŠ¶æ³ã®å¯è¦–åŒ–
  4. å…¨é–¢æ•°çµ±ä¸€: åŒã˜ãƒ­ã‚¸ãƒƒã‚¯ã§çµ±ä¸€

  ğŸŠ åŠ¹æœ

  - ä¿®æ­£å‰: 1000ä»¶ã§åœæ­¢
  - ä¿®æ­£å¾Œ: ç„¡åˆ¶é™ï¼ˆ3000ä»¶â†’30000ä»¶ã§ã‚‚å¯¾å¿œå¯èƒ½ï¼‰

  ã“ã‚Œã§ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©å…ƒãƒ»è¡¨ç¤ºã™ã¹ã¦ãŒ1000ä»¶åˆ¶é™ã‹ã‚‰è§£æ”¾ã•ã‚Œã¾ã—ãŸï¼